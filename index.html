<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StayFinder - Book Your Perfect Stay</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #1e3c72 0%,
          #2a5298 50%,
          #667eea 100%
        );
        background-attachment: fixed;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: radial-gradient(
            circle at 20% 50%,
            rgba(120, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(120, 219, 255, 0.3) 0%,
            transparent 50%
          );
        z-index: -1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header */
      .header {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 20px 0;
        margin-bottom: 30px;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
      }

      .logo {
        font-size: 32px;
        font-weight: bold;
        background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .logo::before {
        content: "üè† ";
        font-size: 28px;
        -webkit-text-fill-color: white;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .nav-buttons {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .welcome-text {
        color: white;
        font-weight: 600;
        margin-right: 15px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
        text-align: center;
      }

      .btn-primary {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
      }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .btn-primary:hover {
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
      }

      /* Hero Section */
      .hero-section {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 60px 40px;
        border-radius: 25px;
        margin-bottom: 40px;
        text-align: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
      }

      .hero-section::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transform: rotate(45deg);
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        100% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
      }

      .hero-title {
        font-size: 48px;
        color: white;
        margin-bottom: 20px;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        position: relative;
        z-index: 1;
      }

      .hero-subtitle {
        font-size: 20px;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 40px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        position: relative;
        z-index: 1;
      }

      /* Search Section */
      .search-section {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        padding: 40px;
        border-radius: 20px;
        margin-bottom: 40px;
        text-align: center;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .search-form {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
        align-items: end;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        min-width: 150px;
      }

      .form-group label {
        margin-bottom: 8px;
        font-weight: 600;
        color: #555;
      }

      .form-group input,
      .form-group select {
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 14px;
        transition: border-color 0.3s ease;
        background: white;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      /* Property Grid */
      .properties-section {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 40px;
        border-radius: 25px;
        margin-bottom: 40px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .section-title {
        font-size: 32px;
        color: white;
        margin-bottom: 40px;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .properties-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
      }

      .property-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .property-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
      }

      .property-image {
        width: 100%;
        height: 220px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
        overflow: hidden;
      }

      .property-image::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          to bottom,
          transparent 0%,
          rgba(0, 0, 0, 0.1) 100%
        );
      }

      .property-type-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        color: #333;
        text-transform: uppercase;
        z-index: 1;
      }

      .property-info {
        padding: 25px;
      }

      .property-title {
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 12px;
        color: #333;
      }

      .property-location {
        color: #666;
        margin-bottom: 18px;
        font-size: 16px;
      }

      .property-features {
        display: flex;
        gap: 20px;
        margin-bottom: 18px;
        font-size: 14px;
        color: #555;
      }

      .feature {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .feature-icon {
        width: 16px;
        height: 16px;
        background-size: contain;
        background-repeat: no-repeat;
      }

      .property-price {
        font-size: 26px;
        font-weight: bold;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(8px);
        z-index: 1000;
        animation: fadeIn 0.3s ease;
      }

      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 25px;
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 28px;
        cursor: pointer;
        color: #666;
        transition: color 0.3s ease;
      }

      .close:hover {
        color: #000;
      }

      /* Dashboard */
      .dashboard {
        display: none;
      }

      .dashboard-nav {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 25px;
        border-radius: 20px;
        flex-wrap: wrap;
      }

      .dashboard-tab {
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: white;
        font-weight: 600;
        backdrop-filter: blur(10px);
      }

      .dashboard-tab.active {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        border-color: transparent;
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
      }

      .tab-content {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        padding: 40px;
        border-radius: 25px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      /* Property Images */
      .property-image-1 {
        background-image: url("https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }
      .property-image-2 {
        background-image: url("https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }
      .property-image-3 {
        background-image: url("https://images.unsplash.com/photo-1613490493576-7fde63acd811?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }
      .property-image-4 {
        background-image: url("https://images.unsplash.com/photo-1449824913935-59a10b8d2000?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }
      .property-image-5 {
        background-image: url("https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }
      .property-image-6 {
        background-image: url("https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80");
      }

      /* Success/Error Messages */
      .message {
        padding: 20px 25px;
        border-radius: 15px;
        margin: 20px 0;
        font-weight: 600;
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1100;
        min-width: 300px;
        backdrop-filter: blur(20px);
        animation: slideIn 0.3s ease;
      }

      .message.success {
        background: rgba(212, 237, 218, 0.95);
        color: #155724;
        border: 1px solid rgba(195, 230, 203, 0.8);
      }

      .message.error {
        background: rgba(248, 215, 218, 0.95);
        color: #721c24;
        border: 1px solid rgba(245, 198, 203, 0.8);
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .hidden {
        display: none;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-title {
          font-size: 36px;
        }

        .hero-subtitle {
          font-size: 16px;
        }

        .search-form {
          flex-direction: column;
          align-items: center;
        }

        .form-group {
          width: 100%;
          max-width: 300px;
        }

        .properties-grid {
          grid-template-columns: 1fr;
        }

        .nav {
          flex-direction: column;
          gap: 20px;
          text-align: center;
        }

        .dashboard-nav {
          flex-direction: column;
        }

        .container {
          padding: 15px;
        }
      }

      /* Booking Form Styles */
      .booking-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .booking-summary {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        border: 1px solid #dee2e6;
      }

      .booking-summary h3 {
        color: #333;
        margin-bottom: 15px;
      }

      /* Feature Icons */
      .bed-icon::before {
        content: "üõèÔ∏è";
      }
      .bath-icon::before {
        content: "üõÅ";
      }
      .guest-icon::before {
        content: "üë•";
      }
      .location-icon::before {
        content: "üìç";
      }

      /* Loading Animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Floating Action Button */
      .fab {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        transition: all 0.3s ease;
        z-index: 999;
      }

      .fab:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 35px rgba(255, 107, 107, 0.5);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header fade-in">
        <nav class="nav">
          <div class="logo">StayFinder</div>
          <div class="nav-buttons" id="navButtons">
            <button class="btn btn-secondary" onclick="showLogin()">
              Login
            </button>
            <button class="btn btn-primary" onclick="showRegister()">
              Sign Up
            </button>
          </div>
        </nav>
      </header>

      <!-- Main Content -->
      <div id="mainContent">
        <!-- Hero Section -->
        <section class="hero-section fade-in">
          <h1 class="hero-title">Find Your Perfect Stay</h1>
          <p class="hero-subtitle">
            Discover amazing places to stay around the world
          </p>
        </section>

        <!-- Search Section -->
        <section class="search-section fade-in">
          <form class="search-form" onsubmit="searchProperties(event)">
            <div class="form-group">
              <label>Location</label>
              <input
                type="text"
                id="searchLocation"
                placeholder="Where to?"
                required
              />
            </div>
            <div class="form-group">
              <label>Check-in</label>
              <input type="date" id="checkinDate" required />
            </div>
            <div class="form-group">
              <label>Check-out</label>
              <input type="date" id="checkoutDate" required />
            </div>
            <div class="form-group">
              <label>Guests</label>
              <select id="guestCount">
                <option value="1">1 Guest</option>
                <option value="2">2 Guests</option>
                <option value="3">3 Guests</option>
                <option value="4">4 Guests</option>
                <option value="5">5+ Guests</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
          </form>
        </section>

        <!-- Properties Section -->
        <section class="properties-section fade-in">
          <h2 class="section-title">Featured Properties</h2>
          <div class="properties-grid" id="propertiesGrid">
            <!-- Properties will be loaded here -->
          </div>
        </section>
      </div>

      <!-- User Dashboard -->
      <div id="userDashboard" class="dashboard">
        <div class="dashboard-nav">
          <button class="dashboard-tab active" onclick="showTab('bookings')">
            My Bookings
          </button>
          <button class="dashboard-tab" onclick="showTab('properties')">
            My Properties
          </button>
          <button class="dashboard-tab" onclick="showTab('profile')">
            Profile
          </button>
          <button class="btn btn-secondary" onclick="logout()">Logout</button>
        </div>

        <div id="bookingsTab" class="tab-content">
          <h2>My Bookings</h2>
          <div id="userBookings">
            <!-- User bookings will be loaded here -->
          </div>
        </div>

        <div id="propertiesTab" class="tab-content hidden">
          <h2>My Properties</h2>
          <button
            class="btn btn-primary"
            onclick="showAddProperty()"
            style="margin-bottom: 20px"
          >
            Add New Property
          </button>
          <div id="userProperties">
            <!-- User properties will be loaded here -->
          </div>
        </div>

        <div id="profileTab" class="tab-content hidden">
          <h2>Profile Settings</h2>
          <div id="userProfile">
            <!-- User profile will be loaded here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab hidden" id="backToTop" onclick="scrollToTop()">‚Üë</div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('loginModal')">&times;</span>
        <h2>Login to StayFinder</h2>
        <form class="booking-form" onsubmit="login(event)">
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="loginEmail" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="loginPassword" required />
          </div>
          <button type="submit" class="btn btn-primary">Login</button>
        </form>
      </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('registerModal')">&times;</span>
        <h2>Join StayFinder</h2>
        <form class="booking-form" onsubmit="register(event)">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="registerName" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="registerEmail" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="registerPassword" required />
          </div>
          <div class="form-group">
            <label>Phone</label>
            <input type="tel" id="registerPhone" required />
          </div>
          <button type="submit" class="btn btn-primary">Create Account</button>
        </form>
      </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('bookingModal')">&times;</span>
        <h2>Book Your Stay</h2>
        <div id="bookingPropertyDetails" class="booking-summary">
          <!-- Property details will be shown here -->
        </div>
        <form class="booking-form" onsubmit="makeBooking(event)">
          <div class="form-group">
            <label>Check-in Date</label>
            <input type="date" id="bookingCheckin" required />
          </div>
          <div class="form-group">
            <label>Check-out Date</label>
            <input type="date" id="bookingCheckout" required />
          </div>
          <div class="form-group">
            <label>Number of Guests</label>
            <select id="bookingGuests">
              <option value="1">1 Guest</option>
              <option value="2">2 Guests</option>
              <option value="3">3 Guests</option>
              <option value="4">4 Guests</option>
              <option value="5">5+ Guests</option>
            </select>
          </div>
          <div class="form-group">
            <label>Special Requests</label>
            <textarea
              id="bookingRequests"
              rows="3"
              style="
                width: 100%;
                padding: 12px;
                border-radius: 10px;
                border: 2px solid #e0e0e0;
                font-family: inherit;
              "
            ></textarea>
          </div>
          <div id="bookingTotal" class="booking-summary">
            <!-- Total will be calculated here -->
          </div>
          <button type="submit" class="btn btn-primary">Confirm Booking</button>
        </form>
      </div>
    </div>

    <!-- Add Property Modal -->
    <div id="addPropertyModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('addPropertyModal')"
          >&times;</span
        >
        <h2>Add New Property</h2>
        <form class="booking-form" onsubmit="addProperty(event)">
          <div class="form-group">
            <label>Property Title</label>
            <input type="text" id="propertyTitle" required />
          </div>
          <div class="form-group">
            <label>Location</label>
            <input type="text" id="propertyLocation" required />
          </div>
          <div class="form-group">
            <label>Property Type</label>
            <select id="propertyType">
              <option value="apartment">Apartment</option>
              <option value="house">House</option>
              <option value="villa">Villa</option>
              <option value="condo">Condo</option>
              <option value="cabin">Cabin</option>
            </select>
          </div>
          <div class="form-group">
            <label>Bedrooms</label>
            <input
              type="number"
              id="propertyBedrooms"
              min="1"
              max="10"
              required
            />
          </div>
          <div class="form-group">
            <label>Bathrooms</label>
            <input
              type="number"
              id="propertyBathrooms"
              min="1"
              max="10"
              required
            />
          </div>
          <div class="form-group">
            <label>Max Guests</label>
            <input
              type="number"
              id="propertyMaxGuests"
              min="1"
              max="20"
              required
            />
          </div>
          <div class="form-group">
            <label>Price per Night ($)</label>
            <input type="number" id="propertyPrice" min="1" required />
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea
              id="propertyDescription"
              rows="4"
              style="
                width: 100%;
                padding: 12px;
                border-radius: 10px;
                border: 2px solid #e0e0e0;
                font-family: inherit;
              "
              required
            ></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Add Property</button>
        </form>
      </div>
    </div>

    <script>
      // In-memory database simulation
      let users = [
        {
          id: 1,
          name: "John Doe",
          email: "john@example.com",
          password: "password123",
          phone: "+1234567890",
        },
      ];

      let properties = [
        {
          id: 1,
          title: "Luxury Downtown Apartment",
          location: "New York, NY",
          type: "apartment",
          bedrooms: 2,
          bathrooms: 2,
          maxGuests: 4,
          price: 200,
          description:
            "Beautiful apartment in the heart of downtown with stunning city views",
          ownerId: 1,
          available: true,
          imageClass: "property-image-1",
        },
        {
          id: 2,
          title: "Cozy Beach House",
          location: "Malibu, CA",
          type: "house",
          bedrooms: 3,
          bathrooms: 2,
          maxGuests: 6,
          price: 350,
          description:
            "Stunning beach house with direct ocean access and panoramic views",
          ownerId: 1,
          available: true,
          imageClass: "property-image-2",
        },
        {
          id: 3,
          title: "Modern Villa with Pool",
          location: "Miami, FL",
          type: "villa",
          bedrooms: 4,
          bathrooms: 3,
          maxGuests: 8,
          price: 500,
          description:
            "Luxury villa with private pool, garden, and state-of-the-art amenities",
          ownerId: 1,
          available: true,
          imageClass: "property-image-3",
        },
        {
          id: 4,
          title: "Mountain Cabin Retreat",
          location: "Aspen, CO",
          type: "cabin",
          bedrooms: 2,
          bathrooms: 1,
          maxGuests: 4,
          price: 250,
          description:
            "Peaceful cabin surrounded by mountains, perfect for nature lovers",
          ownerId: 1,
          available: true,
          imageClass: "property-image-4",
        },
      ];

      let bookings = [];
      let currentUser = null;
      let selectedProperty = null;

      // Initialize the app
      function init() {
        loadProperties();
        setMinDate();
        initScrollToTop();
      }

      // Set minimum date to today
      function setMinDate() {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("checkinDate").min = today;
        document.getElementById("checkoutDate").min = today;
        if (document.getElementById("bookingCheckin")) {
          document.getElementById("bookingCheckin").min = today;
          document.getElementById("bookingCheckout").min = today;
        }
      }

      // Initialize scroll to top functionality
      function initScrollToTop() {
        window.addEventListener("scroll", function () {
          const fab = document.getElementById("backToTop");
          if (window.pageYOffset > 300) {
            fab.classList.remove("hidden");
          } else {
            fab.classList.add("hidden");
          }
        });
      }

      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      }

      // Load and display properties
      function loadProperties(filteredProperties = null) {
        const grid = document.getElementById("propertiesGrid");
        const propertiesToShow = filteredProperties || properties;

        grid.innerHTML = propertiesToShow
          .map(
            (property) => `
                <div class="property-card" onclick="selectProperty(${property.id})">
                    <div class="property-image ${property.imageClass}">
                        <div class="property-type-badge">${property.type}</div>
                    </div>
                    <div class="property-info">
                        <div class="property-title">${property.title}</div>
                        <div class="property-location"><span class="location-icon"></span> ${property.location}</div>
                        <div class="property-features">
                            <span class="feature"><span class="bed-icon"></span> ${property.bedrooms} bed</span>
                            <span class="feature"><span class="bath-icon"></span> ${property.bathrooms} bath</span>
                            <span class="feature"><span class="guest-icon"></span> ${property.maxGuests} guests</span>
                        </div>
                        <div class="property-price">${property.price}/night</div>
                    </div>
                </div>
            `
          )
          .join("");

        // Add animation delay for each card
        const cards = grid.querySelectorAll(".property-card");
        cards.forEach((card, index) => {
          card.style.animationDelay = `${index * 0.1}s`;
          card.classList.add("fade-in");
        });
      }

      // Search functionality
      function searchProperties(event) {
        event.preventDefault();

        const location = document
          .getElementById("searchLocation")
          .value.toLowerCase();
        const checkin = document.getElementById("checkinDate").value;
        const checkout = document.getElementById("checkoutDate").value;
        const guests = parseInt(document.getElementById("guestCount").value);

        // Validate dates
        if (new Date(checkout) <= new Date(checkin)) {
          showMessage("Check-out date must be after check-in date", "error");
          return;
        }

        const filtered = properties.filter((property) => {
          const locationMatch =
            !location || property.location.toLowerCase().includes(location);
          const guestsMatch = property.maxGuests >= guests;
          const availableMatch = property.available;

          return locationMatch && guestsMatch && availableMatch;
        });

        loadProperties(filtered);

        // Show search results message
        const section = document.querySelector(
          ".properties-section .section-title"
        );
        section.textContent =
          filtered.length > 0
            ? `Found ${filtered.length} ${
                filtered.length === 1 ? "property" : "properties"
              }`
            : "No properties found. Try adjusting your search.";

        // Scroll to results
        document.querySelector(".properties-section").scrollIntoView({
          behavior: "smooth",
        });
      }

      // Property selection
      function selectProperty(propertyId) {
        selectedProperty = properties.find((p) => p.id === propertyId);
        if (!currentUser) {
          showMessage("Please login to book a property", "error");
          showLogin();
          return;
        }
        showBookingModal();
      }

      // Modal functions
      function showLogin() {
        document.getElementById("loginModal").style.display = "block";
        document.body.style.overflow = "hidden";
      }

      function showRegister() {
        document.getElementById("registerModal").style.display = "block";
        document.body.style.overflow = "hidden";
      }

      function showBookingModal() {
        if (!selectedProperty) return;

        document.getElementById("bookingPropertyDetails").innerHTML = `
                <h3>${selectedProperty.title}</h3>
                <p><span class="location-icon"></span> ${selectedProperty.location}</p>
                <p><span class="bed-icon"></span> ${selectedProperty.bedrooms} bed ‚Ä¢ <span class="bath-icon"></span> ${selectedProperty.bathrooms} bath ‚Ä¢ <span class="guest-icon"></span> ${selectedProperty.maxGuests} guests</p>
                <p style="font-size: 18px; margin-top: 15px;"><strong>${selectedProperty.price}/night</strong></p>
            `;

        document.getElementById("bookingModal").style.display = "block";
        document.body.style.overflow = "hidden";
        calculateTotal();
      }

      function showAddProperty() {
        document.getElementById("addPropertyModal").style.display = "block";
        document.body.style.overflow = "hidden";
      }

      function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
        document.body.style.overflow = "auto";
      }

      // Authentication
      function login(event) {
        event.preventDefault();

        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        const user = users.find(
          (u) => u.email === email && u.password === password
        );

        if (user) {
          currentUser = user;
          updateUI();
          closeModal("loginModal");
          showMessage("Welcome back! Login successful.", "success");

          // Clear form
          document.getElementById("loginEmail").value = "";
          document.getElementById("loginPassword").value = "";
        } else {
          showMessage("Invalid email or password. Please try again.", "error");
        }
      }

      function register(event) {
        event.preventDefault();

        const name = document.getElementById("registerName").value;
        const email = document.getElementById("registerEmail").value;
        const password = document.getElementById("registerPassword").value;
        const phone = document.getElementById("registerPhone").value;

        if (users.find((u) => u.email === email)) {
          showMessage(
            "Email already exists. Please use a different email.",
            "error"
          );
          return;
        }

        if (password.length < 6) {
          showMessage("Password must be at least 6 characters long", "error");
          return;
        }

        const newUser = {
          id: users.length + 1,
          name,
          email,
          password,
          phone,
        };

        users.push(newUser);
        currentUser = newUser;
        updateUI();
        closeModal("registerModal");
        showMessage(
          "Account created successfully! Welcome to StayFinder.",
          "success"
        );

        // Clear form
        document.querySelector("#registerModal form").reset();
      }

      function logout() {
        currentUser = null;
        updateUI();
        showMessage("You have been logged out successfully", "success");
      }

      // Update UI based on authentication state
      function updateUI() {
        const navButtons = document.getElementById("navButtons");
        const mainContent = document.getElementById("mainContent");
        const dashboard = document.getElementById("userDashboard");

        if (currentUser) {
          navButtons.innerHTML = `
                    <span class="welcome-text">Welcome, ${currentUser.name}!</span>
                    <button class="btn btn-secondary" onclick="showDashboard()">Dashboard</button>
                    <button class="btn btn-secondary" onclick="showMainContent()">Home</button>
                    <button class="btn btn-primary" onclick="logout()">Logout</button>
                `;
        } else {
          navButtons.innerHTML = `
                    <button class="btn btn-secondary" onclick="showLogin()">Login</button>
                    <button class="btn btn-primary" onclick="showRegister()">Sign Up</button>
                `;
          mainContent.style.display = "block";
          dashboard.style.display = "none";
        }
      }

      function showDashboard() {
        document.getElementById("mainContent").style.display = "none";
        document.getElementById("userDashboard").style.display = "block";
        loadUserData();
        scrollToTop();
      }

      function showMainContent() {
        document.getElementById("mainContent").style.display = "block";
        document.getElementById("userDashboard").style.display = "none";
        scrollToTop();
      }

      // Dashboard functionality
      function showTab(tabName) {
        // Update tab buttons
        document.querySelectorAll(".dashboard-tab").forEach((tab) => {
          tab.classList.remove("active");
        });
        event.target.classList.add("active");

        // Show/hide tab content
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.add("hidden");
        });
        document.getElementById(tabName + "Tab").classList.remove("hidden");

        if (tabName === "bookings") loadUserBookings();
        if (tabName === "properties") loadUserProperties();
        if (tabName === "profile") loadUserProfile();
      }

      function loadUserData() {
        loadUserBookings();
        loadUserProperties();
        loadUserProfile();
      }

      function loadUserBookings() {
        const userBookingsDiv = document.getElementById("userBookings");
        const userBookings = bookings.filter(
          (b) => b.userId === currentUser.id
        );

        if (userBookings.length === 0) {
          userBookingsDiv.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <h3>No bookings yet</h3>
                        <p>Start exploring properties and make your first booking!</p>
                        <button class="btn btn-primary" onclick="showMainContent()" style="margin-top: 20px;">Browse Properties</button>
                    </div>
                `;
          return;
        }

        userBookingsDiv.innerHTML = userBookings
          .map((booking) => {
            const property = properties.find(
              (p) => p.id === booking.propertyId
            );
            return `
                    <div class="property-card" style="margin-bottom: 20px;">
                        <div class="property-image ${
                          property.imageClass
                        }"></div>
                        <div class="property-info">
                            <div class="property-title">${property.title}</div>
                            <div class="property-location"><span class="location-icon"></span> ${
                              property.location
                            }</div>
                            <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                                <p><strong>Check-in:</strong> ${formatDate(
                                  booking.checkin
                                )}</p>
                                <p><strong>Check-out:</strong> ${formatDate(
                                  booking.checkout
                                )}</p>
                                <p><strong>Guests:</strong> ${
                                  booking.guests
                                }</p>
                                <p><strong>Nights:</strong> ${
                                  booking.nights
                                }</p>
                                <p style="font-size: 18px; color: #667eea;"><strong>Total: ${
                                  booking.total
                                }</strong></p>
                                <p><strong>Status:</strong> <span style="color: #28a745; font-weight: 600;">${
                                  booking.status
                                }</span></p>
                            </div>
                            ${
                              booking.requests
                                ? `<p><strong>Special Requests:</strong> ${booking.requests}</p>`
                                : ""
                            }
                        </div>
                    </div>
                `;
          })
          .join("");
      }

      function loadUserProperties() {
        const userPropertiesDiv = document.getElementById("userProperties");
        const userProperties = properties.filter(
          (p) => p.ownerId === currentUser.id
        );

        if (userProperties.length === 0) {
          userPropertiesDiv.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <h3>No properties listed yet</h3>
                        <p>Start earning by listing your property!</p>
                    </div>
                `;
          return;
        }

        userPropertiesDiv.innerHTML = userProperties
          .map(
            (property) => `
                <div class="property-card" style="margin-bottom: 20px;">
                    <div class="property-image ${property.imageClass}">
                        <div class="property-type-badge">${property.type}</div>
                    </div>
                    <div class="property-info">
                        <div class="property-title">${property.title}</div>
                        <div class="property-location"><span class="location-icon"></span> ${property.location}</div>
                        <div class="property-features">
                            <span class="feature"><span class="bed-icon"></span> ${property.bedrooms} bed</span>
                            <span class="feature"><span class="bath-icon"></span> ${property.bathrooms} bath</span>
                            <span class="feature"><span class="guest-icon"></span> ${property.maxGuests} guests</span>
                        </div>
                        <div class="property-price">${property.price}/night</div>
                        <div style="margin-top: 15px; display: flex; gap: 10px;">
                            <button class="btn btn-secondary" onclick="editProperty(${property.id})">Edit</button>
                            <button class="btn btn-secondary" onclick="deleteProperty(${property.id})" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">Delete</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      function loadUserProfile() {
        const userProfileDiv = document.getElementById("userProfile");
        userProfileDiv.innerHTML = `
                <form class="booking-form" onsubmit="updateProfile(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="profileName" value="${currentUser.name}" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="profileEmail" value="${currentUser.email}" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="profilePhone" value="${currentUser.phone}" required>
                    </div>
                    <div class="form-group">
                        <label>New Password (leave blank to keep current)</label>
                        <input type="password" id="profilePassword" minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            `;
      }

      // Booking functionality
      function calculateTotal() {
        const checkin = document.getElementById("bookingCheckin").value;
        const checkout = document.getElementById("bookingCheckout").value;

        if (!checkin || !checkout || !selectedProperty) return;

        const checkinDate = new Date(checkin);
        const checkoutDate = new Date(checkout);
        const timeDiff = checkoutDate.getTime() - checkinDate.getTime();
        const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));

        if (nights > 0) {
          const subtotal = nights * selectedProperty.price;
          const serviceFee = Math.round(subtotal * 0.12);
          const taxes = Math.round(subtotal * 0.08);
          const total = subtotal + serviceFee + taxes;

          document.getElementById("bookingTotal").innerHTML = `
                    <h3>Booking Summary</h3>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>${nights} night${nights > 1 ? "s" : ""} √ó ${
            selectedProperty.price
          }</span>
                        <span>${subtotal}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Service fee</span>
                        <span>${serviceFee}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <span>Taxes</span>
                        <span>${taxes}</span>
                    </div>
                    <hr style="margin: 15px 0;">
                    <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: bold; color: #667eea;">
                        <span>Total</span>
                        <span>${total}</span>
                    </div>
                `;
        } else {
          document.getElementById("bookingTotal").innerHTML = `
                    <div style="color: #dc3545; text-align: center;">
                        <p>Please select valid dates</p>
                    </div>
                `;
        }
      }

      function makeBooking(event) {
        event.preventDefault();

        const checkin = document.getElementById("bookingCheckin").value;
        const checkout = document.getElementById("bookingCheckout").value;
        const guests = document.getElementById("bookingGuests").value;
        const requests = document.getElementById("bookingRequests").value;

        if (!checkin || !checkout) {
          showMessage("Please select check-in and check-out dates", "error");
          return;
        }

        const checkinDate = new Date(checkin);
        const checkoutDate = new Date(checkout);
        const timeDiff = checkoutDate.getTime() - checkinDate.getTime();
        const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));

        if (nights <= 0) {
          showMessage("Check-out date must be after check-in date", "error");
          return;
        }

        const subtotal = nights * selectedProperty.price;
        const serviceFee = Math.round(subtotal * 0.12);
        const taxes = Math.round(subtotal * 0.08);
        const total = subtotal + serviceFee + taxes;

        const booking = {
          id: bookings.length + 1,
          userId: currentUser.id,
          propertyId: selectedProperty.id,
          checkin,
          checkout,
          guests: parseInt(guests),
          requests,
          nights,
          total,
          status: "Confirmed",
          bookingDate: new Date().toISOString().split("T")[0],
        };

        bookings.push(booking);
        closeModal("bookingModal");
        showMessage(
          "üéâ Booking confirmed! Check your dashboard for details.",
          "success"
        );

        // Reset form
        document.querySelector("#bookingModal form").reset();
      }

      // Property management
      function addProperty(event) {
        event.preventDefault();

        const title = document.getElementById("propertyTitle").value;
        const location = document.getElementById("propertyLocation").value;
        const type = document.getElementById("propertyType").value;
        const bedrooms = parseInt(
          document.getElementById("propertyBedrooms").value
        );
        const bathrooms = parseInt(
          document.getElementById("propertyBathrooms").value
        );
        const maxGuests = parseInt(
          document.getElementById("propertyMaxGuests").value
        );
        const price = parseInt(document.getElementById("propertyPrice").value);
        const description = document.getElementById(
          "propertyDescription"
        ).value;

        // Random image class for new properties
        const imageClasses = [
          "property-image-5",
          "property-image-6",
          "property-image-1",
        ];
        const randomImageClass =
          imageClasses[Math.floor(Math.random() * imageClasses.length)];

        const newProperty = {
          id: properties.length + 1,
          title,
          location,
          type,
          bedrooms,
          bathrooms,
          maxGuests,
          price,
          description,
          ownerId: currentUser.id,
          available: true,
          imageClass: randomImageClass,
        };

        properties.push(newProperty);
        closeModal("addPropertyModal");
        showMessage("Property added successfully! üè†", "success");
        loadProperties();
        loadUserProperties();

        // Reset form
        document.querySelector("#addPropertyModal form").reset();
      }

      function editProperty(propertyId) {
        const property = properties.find((p) => p.id === propertyId);
        if (!property) return;

        // Pre-fill the form with existing data
        document.getElementById("propertyTitle").value = property.title;
        document.getElementById("propertyLocation").value = property.location;
        document.getElementById("propertyType").value = property.type;
        document.getElementById("propertyBedrooms").value = property.bedrooms;
        document.getElementById("propertyBathrooms").value = property.bathrooms;
        document.getElementById("propertyMaxGuests").value = property.maxGuests;
        document.getElementById("propertyPrice").value = property.price;
        document.getElementById("propertyDescription").value =
          property.description;

        // Change form handler temporarily
        const form = document.querySelector("#addPropertyModal form");
        const oldHandler = form.onsubmit;
        form.onsubmit = function (event) {
          event.preventDefault();
          updateProperty(propertyId);
          form.onsubmit = oldHandler;
        };

        // Update modal title
        document.querySelector("#addPropertyModal h2").textContent =
          "Edit Property";
        showAddProperty();
      }

      function updateProperty(propertyId) {
        const property = properties.find((p) => p.id === propertyId);
        if (!property) return;

        property.title = document.getElementById("propertyTitle").value;
        property.location = document.getElementById("propertyLocation").value;
        property.type = document.getElementById("propertyType").value;
        property.bedrooms = parseInt(
          document.getElementById("propertyBedrooms").value
        );
        property.bathrooms = parseInt(
          document.getElementById("propertyBathrooms").value
        );
        property.maxGuests = parseInt(
          document.getElementById("propertyMaxGuests").value
        );
        property.price = parseInt(
          document.getElementById("propertyPrice").value
        );
        property.description = document.getElementById(
          "propertyDescription"
        ).value;

        closeModal("addPropertyModal");
        showMessage("Property updated successfully! ‚ú®", "success");
        loadProperties();
        loadUserProperties();

        // Reset modal title
        document.querySelector("#addPropertyModal h2").textContent =
          "Add New Property";
        document.querySelector("#addPropertyModal form").reset();
      }

      function deleteProperty(propertyId) {
        if (
          !confirm(
            "Are you sure you want to delete this property? This action cannot be undone."
          )
        )
          return;

        const index = properties.findIndex((p) => p.id === propertyId);
        if (index !== -1) {
          properties.splice(index, 1);
          showMessage("Property deleted successfully", "success");
          loadProperties();
          loadUserProperties();
        }
      }

      function updateProfile(event) {
        event.preventDefault();

        const name = document.getElementById("profileName").value;
        const email = document.getElementById("profileEmail").value;
        const phone = document.getElementById("profilePhone").value;
        const password = document.getElementById("profilePassword").value;

        // Check if email is already taken by another user
        const existingUser = users.find(
          (u) => u.email === email && u.id !== currentUser.id
        );
        if (existingUser) {
          showMessage(
            "Email already exists. Please use a different email.",
            "error"
          );
          return;
        }

        // Update user data
        currentUser.name = name;
        currentUser.email = email;
        currentUser.phone = phone;
        if (password && password.length >= 6) {
          currentUser.password = password;
        } else if (password && password.length < 6) {
          showMessage("Password must be at least 6 characters long", "error");
          return;
        }

        // Update in users array
        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex !== -1) {
          users[userIndex] = { ...currentUser };
        }

        updateUI();
        showMessage("Profile updated successfully! ‚úÖ", "success");

        // Clear password field
        document.getElementById("profilePassword").value = "";
      }

      // Utility functions
      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("en-US", {
          weekday: "short",
          year: "numeric",
          month: "short",
          day: "numeric",
        });
      }

      function showMessage(message, type) {
        // Remove existing messages
        const existingMessage = document.querySelector(".message");
        if (existingMessage) {
          existingMessage.remove();
        }

        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${type}`;
        messageDiv.textContent = message;

        document.body.appendChild(messageDiv);

        // Auto-remove message after 5 seconds
        setTimeout(() => {
          if (messageDiv.parentNode) {
            messageDiv.remove();
          }
        }, 5000);

        // Click to dismiss
        messageDiv.addEventListener("click", () => {
          messageDiv.remove();
        });
      }

      // Event listeners
      document.addEventListener("DOMContentLoaded", function () {
        init();

        // Close modals when clicking outside
        window.onclick = function (event) {
          const modals = document.querySelectorAll(".modal");
          modals.forEach((modal) => {
            if (event.target === modal) {
              closeModal(modal.id);
            }
          });
        };

        // Auto-calculate booking total when dates change
        const bookingCheckin = document.getElementById("bookingCheckin");
        const bookingCheckout = document.getElementById("bookingCheckout");

        if (bookingCheckin)
          bookingCheckin.addEventListener("change", calculateTotal);
        if (bookingCheckout)
          bookingCheckout.addEventListener("change", calculateTotal);

        // Update checkout min date when checkin changes
        if (bookingCheckin) {
          bookingCheckin.addEventListener("change", function () {
            const checkinDate = this.value;
            if (bookingCheckout) {
              bookingCheckout.min = checkinDate;

              // Clear checkout if it's before or equal to checkin
              if (
                bookingCheckout.value &&
                bookingCheckout.value <= checkinDate
              ) {
                bookingCheckout.value = "";
                document.getElementById("bookingTotal").innerHTML = "";
              }
            }
          });
        }

        // Same for search form
        document
          .getElementById("checkinDate")
          .addEventListener("change", function () {
            const checkinDate = this.value;
            const checkoutInput = document.getElementById("checkoutDate");
            checkoutInput.min = checkinDate;

            if (checkoutInput.value && checkoutInput.value <= checkinDate) {
              checkoutInput.value = "";
            }
          });
      });

      // Demo data loader
      function loadDemoData() {
        const demoProperties = [
          {
            id: 5,
            title: "Penthouse Suite",
            location: "Los Angeles, CA",
            type: "apartment",
            bedrooms: 3,
            bathrooms: 2,
            maxGuests: 6,
            price: 450,
            description:
              "Luxury penthouse with breathtaking city views and premium amenities",
            ownerId: 1,
            available: true,
            imageClass: "property-image-5",
          },
          {
            id: 6,
            title: "Historic Townhouse",
            location: "Boston, MA",
            type: "house",
            bedrooms: 3,
            bathrooms: 2,
            maxGuests: 6,
            price: 280,
            description:
              "Charming historic home with modern amenities in downtown Boston",
            ownerId: 1,
            available: true,
            imageClass: "property-image-6",
          },
        ];

        properties.push(...demoProperties);
        loadProperties();
      }

      // Load demo data after initialization
      setTimeout(loadDemoData, 1000);
    </script>
  </body>
</html>
